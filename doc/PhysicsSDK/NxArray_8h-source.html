<html>
<head>
<title>Physics SDK API Reference: NxArray.h Source File</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">

<LINK HREF="../stylesheet.css" REL="stylesheet" TYPE="text/css">

</head>

<body bgcolor="#FFFFFF">
<img alt="" src="images/PhysXlogo.png" align="middle"> <br>

<center>

<hr>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp;  </center>
<hr>
<!-- Generated by Doxygen 1.4.6-NO -->
<h1>NxArray.h</h1><a href="NxArray_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef NX_FOUNDATION_NXARRAY</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define NX_FOUNDATION_NXARRAY</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span><span class="comment">/*----------------------------------------------------------------------------*\</span>
<a name="l00004"></a>00004 <span class="comment">|</span>
<a name="l00005"></a>00005 <span class="comment">|                       Public Interface to Ageia PhysX Technology</span>
<a name="l00006"></a>00006 <span class="comment">|</span>
<a name="l00007"></a>00007 <span class="comment">|                                www.ageia.com</span>
<a name="l00008"></a>00008 <span class="comment">|</span>
<a name="l00009"></a>00009 <span class="comment">\*----------------------------------------------------------------------------*/</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include "<a class="code" href="Nx_8h.html">Nx.h</a>"</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include "<a class="code" href="NxAllocatorDefault_8h.html">NxAllocatorDefault.h</a>"</span>
<a name="l00016"></a>00016 <span class="comment">//#include "NxUserAllocatorAccess.h"</span>
<a name="l00017"></a>00017 <span class="comment">//#include "Allocateable.h"</span>
<a name="l00018"></a>00018 
<a name="l00026"></a>00026 <span class="keyword">template</span>&lt;<span class="keyword">class</span> ElemType, <span class="keyword">class</span> AllocType = NxAllocatorDefault&gt;
<a name="l00027"></a><a class="code" href="classNxArray.html">00027</a> <span class="keyword">class </span><a class="code" href="classNxArray.html">NxArray</a><span class="comment">// : public Allocateable</span>
<a name="l00028"></a>00028     {
<a name="l00029"></a>00029     <span class="keyword">public</span>:
<a name="l00030"></a><a class="code" href="classNxArray.html#83b37d0b96cd4758c9a4e0fddeaca9d8">00030</a>     <span class="keyword">typedef</span> <a class="code" href="classNxArray.html">NxArray&lt;ElemType,AllocType&gt;</a> <a class="code" href="classNxArray.html">MyType</a>;
<a name="l00031"></a><a class="code" href="classNxArray.html#3831ec8060e3819e756861376a8d5e88">00031</a>     <span class="keyword">typedef</span> ElemType * <a class="code" href="classNxArray.html#3831ec8060e3819e756861376a8d5e88">Iterator</a>;
<a name="l00032"></a><a class="code" href="classNxArray.html#b305a60c061fb3d43a316de365402076">00032</a>     <span class="keyword">typedef</span> <span class="keyword">const</span> ElemType * <a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a>;
<a name="l00033"></a>00033     <span class="comment">/*</span>
<a name="l00034"></a>00034 <span class="comment">    Same as above with STL compliant syntax.  Deprecated.</span>
<a name="l00035"></a>00035 <span class="comment">    */</span>
<a name="l00036"></a><a class="code" href="classNxArray.html#1928e8f8c5f0d9bd5508f074b07e0133">00036</a>     <span class="keyword">typedef</span> <a class="code" href="classNxArray.html#3831ec8060e3819e756861376a8d5e88">Iterator</a> <a class="code" href="classNxArray.html#1928e8f8c5f0d9bd5508f074b07e0133">iterator</a>;
<a name="l00037"></a><a class="code" href="classNxArray.html#216f2e3313929a1e3982989e4534ad64">00037</a>     <span class="keyword">typedef</span> <a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a> <a class="code" href="classNxFluidEmitterDesc.html">const_iterator</a>;
<a name="l00038"></a>00038 
<a name="l00042"></a><a class="code" href="classNxArray.html#ddd247eb4e12ad3595a712d1d566b054">00042</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxArray.html#ddd247eb4e12ad3595a712d1d566b054">NxArray</a>() : <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>(0), <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a>(0), <a class="code" href="classNxArray.html#55fee09a37ae87806add57e2118c190e">memEnd</a>(0) 
<a name="l00043"></a>00043                                                                         {
<a name="l00044"></a>00044                                                                         <span class="comment">//nothing</span>
<a name="l00045"></a>00045                                                                         }
<a name="l00046"></a>00046 
<a name="l00053"></a><a class="code" href="classNxArray.html#897b9bb4fae002efb0dcd92400f2d54a">00053</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxArray.html#ddd247eb4e12ad3595a712d1d566b054">NxArray</a>(<span class="keywordtype">unsigned</span> n, <span class="keyword">const</span> ElemType&amp; v = ElemType() )
<a name="l00054"></a>00054                                                                         {
<a name="l00055"></a>00055                                                                         <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> = <a class="code" href="classNxArray.html#8ac7620fc25dd065c3cd2113d28d43a9">allocate</a>(n);
<a name="l00056"></a>00056                                                                         <a class="code" href="classNxArray.html#3bf8fd9eaef509326919b66381a0c2bd">fill</a>(<a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>, n, v);
<a name="l00057"></a>00057                                                                         <a class="code" href="classNxArray.html#55fee09a37ae87806add57e2118c190e">memEnd</a> = <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a> = <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> + n;
<a name="l00058"></a>00058                                                                         }
<a name="l00059"></a>00059 
<a name="l00065"></a><a class="code" href="classNxArray.html#99cd02cb514767da2ba6ce3624f64f20">00065</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxArray.html#ddd247eb4e12ad3595a712d1d566b054">NxArray</a>(<span class="keyword">const</span> <a class="code" href="classNxArray.html">MyType</a> &amp; other)
<a name="l00066"></a>00066                                                                         {
<a name="l00067"></a>00067                                                                         <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> = <a class="code" href="classNxArray.html#8ac7620fc25dd065c3cd2113d28d43a9">allocate</a>(other.<a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>());
<a name="l00068"></a>00068                                                                         <a class="code" href="classNxArray.html#55fee09a37ae87806add57e2118c190e">memEnd</a> = <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a> = <a class="code" href="classNxArray.html#cc051014614a886c1463c663615c1966">copy</a>(other.<a class="code" href="classNxArray.html#93ef3de99390fd70b533559e57647ee8">begin</a>(), other.<a class="code" href="classNxArray.html#a37f96859b5fe67d63ea87666021a88c">end</a>(), <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>);
<a name="l00069"></a>00069                                                                         }
<a name="l00070"></a>00070 
<a name="l00075"></a><a class="code" href="classNxArray.html#48c8ae048bbef9a463b64155cee42596">00075</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxArray.html#48c8ae048bbef9a463b64155cee42596">~NxArray</a>()
<a name="l00076"></a>00076                                                                         {
<a name="l00077"></a>00077                                                                         <a class="code" href="classNxArray.html#779f5855ea3d4a7b0368c029a3ef0e4d">destroy</a>(<a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>, <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a>);
<a name="l00078"></a>00078                                                                         <a class="code" href="classNxArray.html#7dac57be22bf91cb9f3f6ea18c986a48">deallocate</a>(<a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>);
<a name="l00079"></a>00079                                                                         <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> = 0;
<a name="l00080"></a>00080                                                                         <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a> = 0;
<a name="l00081"></a>00081                                                                         <a class="code" href="classNxArray.html#55fee09a37ae87806add57e2118c190e">memEnd</a> = 0;
<a name="l00082"></a>00082                                                                         }
<a name="l00083"></a>00083 
<a name="l00089"></a><a class="code" href="classNxArray.html#4df0dfa48c598967733d029410b7f5cf">00089</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxArray.html">MyType</a>&amp; <a class="code" href="classNxArray.html#4df0dfa48c598967733d029410b7f5cf">operator=</a>(<span class="keyword">const</span> <a class="code" href="classNxArray.html">MyType</a>&amp; other)
<a name="l00090"></a>00090                                                                         {
<a name="l00091"></a>00091                                                                         <span class="keywordflow">if</span> (<span class="keyword">this</span> != &amp;other)
<a name="l00092"></a>00092                                                                             {
<a name="l00093"></a>00093                                                                             <span class="keywordflow">if</span> (other.<a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>() &lt;= <a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>())
<a name="l00094"></a>00094                                                                                 {
<a name="l00095"></a>00095                                                                                 <a class="code" href="classNxArray.html#3831ec8060e3819e756861376a8d5e88">Iterator</a> s = <a class="code" href="classNxArray.html#cc051014614a886c1463c663615c1966">copy</a>(other.<a class="code" href="classNxArray.html#93ef3de99390fd70b533559e57647ee8">begin</a>(), other.<a class="code" href="classNxArray.html#a37f96859b5fe67d63ea87666021a88c">end</a>(), <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>);
<a name="l00096"></a>00096                                                                                 <a class="code" href="classNxArray.html#779f5855ea3d4a7b0368c029a3ef0e4d">destroy</a>(s, <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a>);
<a name="l00097"></a>00097                                                                                 <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a> = <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> + other.<a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>(); 
<a name="l00098"></a>00098                                                                                 }
<a name="l00099"></a>00099                                                                             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (other.<a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>() &lt;= <a class="code" href="classNxArray.html#cdae7562ae10be1cd54acc3c851d9bc5">capacity</a>())
<a name="l00100"></a>00100                                                                                 {
<a name="l00101"></a>00101                                                                                 <a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a> s = other.<a class="code" href="classNxArray.html#93ef3de99390fd70b533559e57647ee8">begin</a>() + <a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>();
<a name="l00102"></a>00102                                                                                 <a class="code" href="classNxArray.html#cc051014614a886c1463c663615c1966">copy</a>(other.<a class="code" href="classNxArray.html#93ef3de99390fd70b533559e57647ee8">begin</a>(), s, <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>);
<a name="l00103"></a>00103                                                                                 <a class="code" href="classNxArray.html#cc051014614a886c1463c663615c1966">copy</a>(s, other.<a class="code" href="classNxArray.html#a37f96859b5fe67d63ea87666021a88c">end</a>(), <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a>);
<a name="l00104"></a>00104                                                                                 <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a> = <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> + other.<a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">size</a>();
<a name="l00105"></a>00105                                                                                 }
<a name="l00106"></a>00106                                                                             <span class="keywordflow">else</span>
<a name="l00107"></a>00107                                                                                 {
<a name="l00108"></a>00108                                                                                 <a class="code" href="classNxArray.html#779f5855ea3d4a7b0368c029a3ef0e4d">destroy</a>(<a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>, <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a>);
<a name="l00109"></a>00109                                                                                 <a class="code" href="classNxArray.html#7dac57be22bf91cb9f3f6ea18c986a48">deallocate</a>(<a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>);
<a name="l00110"></a>00110                                                                                 <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a> = <a class="code" href="classNxArray.html#8ac7620fc25dd065c3cd2113d28d43a9">allocate</a>(other.size());
<a name="l00111"></a>00111                                                                                 <a class="code" href="classNxArray.html#27f6e1a883c3a15cdcaa8b6a412ee179">last</a> = <a class="code" href="classNxArray.html#cc051014614a886c1463c663615c1966">copy</a>(other.begin(), other.end(), <a class="code" href="classNxArray.html#c2d5a97537b8e9dfbd38e8e55ac66fc3">first</a>);
<a name="l00112"></a>00112                                                                                 <a class="code" href="classNxArray.html#55fee09a37ae87806add57e2118c190e">memEnd</a> = last; 
<a name="l00113"></a>00113                                                                                 }
<a name="l00114"></a>00114                                                                             }
<a name="l00115"></a>00115                                                                         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00116"></a>00116                                                                         }
<a name="l00117"></a>00117 
<a name="l00123"></a><a class="code" href="classNxArray.html#3ef80f4b6fb1602c617503b4a9a097b0">00123</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> reserve(<span class="keywordtype">unsigned</span> n)
<a name="l00124"></a>00124                                                                         {
<a name="l00125"></a>00125                                                                         <span class="keywordflow">if</span> (capacity() &lt; n)
<a name="l00126"></a>00126                                                                             {
<a name="l00127"></a>00127                                                                             
<a name="l00128"></a>00128                                                                             iterator s = allocate(n);
<a name="l00129"></a>00129                                                                             copy(first, last, s);
<a name="l00130"></a>00130                                                                             destroy(first, last);
<a name="l00131"></a>00131                                                                             deallocate(first);
<a name="l00132"></a>00132                                                                             <span class="comment">//if we knew we just have atomics we could just do this:</span>
<a name="l00133"></a>00133                                                                             <span class="comment">//first = reallocate(n, first);</span>
<a name="l00134"></a>00134                                                                             memEnd = s + n;
<a name="l00135"></a>00135                                                                             last = s + size();
<a name="l00136"></a>00136                                                                             first = s; 
<a name="l00137"></a>00137                                                                             }
<a name="l00138"></a>00138                                                                         }
<a name="l00139"></a>00139 
<a name="l00143"></a><a class="code" href="classNxArray.html#cdae7562ae10be1cd54acc3c851d9bc5">00143</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">unsigned</span> capacity()<span class="keyword"> const</span>
<a name="l00144"></a>00144 <span class="keyword">                                                                        </span>{
<a name="l00145"></a>00145                                                                         <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span>)(first == 0 ? 0 : memEnd - first);
<a name="l00146"></a>00146                                                                         }
<a name="l00147"></a>00147 
<a name="l00156"></a><a class="code" href="classNxArray.html#a0ef8be24a68a127f86737bb29e97756">00156</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> resize(<span class="keywordtype">unsigned</span> n, <span class="keyword">const</span> ElemType&amp; v = ElemType())
<a name="l00157"></a>00157                                                                         {
<a name="l00158"></a>00158                                                                         <span class="keywordflow">if</span> (size() &lt; n)
<a name="l00159"></a>00159                                                                             insert(end(), n - size(), v);
<a name="l00160"></a>00160                                                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; size())
<a name="l00161"></a>00161                                                                             erase(begin() + n, end());
<a name="l00162"></a>00162                                                                         
<a name="l00163"></a>00163                                                                         <span class="keywordflow">if</span> (first == last) 
<a name="l00164"></a>00164                                                                             {
<a name="l00165"></a>00165                                                                             deallocate(first);
<a name="l00166"></a>00166                                                                             first = 0;
<a name="l00167"></a>00167                                                                             last = 0;
<a name="l00168"></a>00168                                                                             memEnd = 0;
<a name="l00169"></a>00169                                                                             }
<a name="l00170"></a>00170 
<a name="l00171"></a>00171                                                                         <span class="keywordflow">if</span> (memEnd &gt; last) <span class="comment">//release unused memory</span>
<a name="l00172"></a>00172                                                                             {
<a name="l00173"></a>00173                                                                             size_t s = (size_t)(last - first);
<a name="l00174"></a>00174                                                                             first = reallocate(size(), first);
<a name="l00175"></a>00175                                                                             memEnd = last  = first + s;
<a name="l00176"></a>00176                                                                             }
<a name="l00177"></a>00177                                                                         }
<a name="l00178"></a>00178 
<a name="l00182"></a><a class="code" href="classNxArray.html#032c7fa8c105c04759ba344c3a10beaf">00182</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">unsigned</span> size()<span class="keyword"> const</span>
<a name="l00183"></a>00183 <span class="keyword">                                                                        </span>{
<a name="l00184"></a>00184                                                                         <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span>)(last - first);
<a name="l00185"></a>00185                                                                         }
<a name="l00186"></a>00186 
<a name="l00190"></a><a class="code" href="classNxArray.html#5ddec133660bcd96858bc3b70c7520f6">00190</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">bool</span> isEmpty()<span class="keyword"> const</span>
<a name="l00191"></a>00191 <span class="keyword">                                                                        </span>{
<a name="l00192"></a>00192                                                                         <span class="keywordflow">return</span> (size() == 0);
<a name="l00193"></a>00193                                                                         }
<a name="l00194"></a>00194 
<a name="l00198"></a><a class="code" href="classNxArray.html#4033825ea078a0f998c7fce9facbe5f5">00198</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">bool</span> empty()<span class="keyword"> const</span>
<a name="l00199"></a>00199 <span class="keyword">                                                                        </span>{
<a name="l00200"></a>00200                                                                         <span class="keywordflow">return</span> isEmpty();
<a name="l00201"></a>00201                                                                         }
<a name="l00202"></a>00202 
<a name="l00210"></a><a class="code" href="classNxArray.html#576f4b2ad6907d94811396ffe4cb3b58">00210</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> pushBack(<span class="keyword">const</span> ElemType&amp; x)
<a name="l00211"></a>00211                                                                         {
<a name="l00212"></a>00212                                                                         <span class="comment">//insert(end(), x);</span>
<a name="l00213"></a>00213                                                                         <span class="keywordflow">if</span> (memEnd &lt;= last)
<a name="l00214"></a>00214                                                                             {
<a name="l00215"></a>00215                                                                             reserve((1 + size()) * 2);
<a name="l00216"></a>00216                                                                             }
<a name="l00217"></a>00217                                                                         *last = x;
<a name="l00218"></a>00218                                                                         last ++;
<a name="l00219"></a>00219                                                                         }
<a name="l00220"></a>00220 
<a name="l00224"></a><a class="code" href="classNxArray.html#8d802b309efd0611528544857750b74c">00224</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> ElemType &amp; pushBack()
<a name="l00225"></a>00225                                                                         {
<a name="l00226"></a>00226                                                                         <span class="keywordflow">if</span> (memEnd &lt;= last)
<a name="l00227"></a>00227                                                                             {
<a name="l00228"></a>00228                                                                             reserve((1 + size()) * 2);
<a name="l00229"></a>00229                                                                             }
<a name="l00230"></a>00230                                                                         last ++;
<a name="l00231"></a>00231                                                                         <span class="keywordflow">return</span> *(last-1);
<a name="l00232"></a>00232                                                                         }
<a name="l00238"></a><a class="code" href="classNxArray.html#4fe84dc3c3266a918abb0cc65c1f0ef6">00238</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> push_back(<span class="keyword">const</span> ElemType&amp; x)
<a name="l00239"></a>00239                                                                         {
<a name="l00240"></a>00240                                                                         pushBack(x);
<a name="l00241"></a>00241                                                                         }
<a name="l00242"></a>00242 
<a name="l00246"></a><a class="code" href="classNxArray.html#78b59800eb13c233043f78667dbf1028">00246</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> popBack()
<a name="l00247"></a>00247                                                                         {
<a name="l00248"></a>00248                                                                         --last;
<a name="l00249"></a>00249                                                                         last-&gt;~ElemType();
<a name="l00250"></a>00250                                                                         }
<a name="l00251"></a>00251 
<a name="l00255"></a><a class="code" href="classNxArray.html#dab167262842132a44e2121b338db92f">00255</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> pop_back()
<a name="l00256"></a>00256                                                                         {
<a name="l00257"></a>00257                                                                         popBack();
<a name="l00258"></a>00258                                                                         }
<a name="l00259"></a>00259 
<a name="l00263"></a><a class="code" href="classNxArray.html#882f337e8dfe79625cd05f73a4340893">00263</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> clear()
<a name="l00264"></a>00264                                                                         {
<a name="l00265"></a>00265                                                                         destroy(begin(), end());
<a name="l00266"></a>00266                                                                         last = first;
<a name="l00267"></a>00267                                                                         }
<a name="l00268"></a>00268 
<a name="l00274"></a><a class="code" href="classNxArray.html#42edef4e9a46c4e4748ad5df5dd2594e">00274</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> replaceWithLast(<span class="keywordtype">unsigned</span> position)
<a name="l00275"></a>00275                                                                         {
<a name="l00276"></a>00276                                                                         <a class="code" href="group__foundation.html#g59363d1557cc274ba10bc9dbcac17ca1">NX_ASSERT</a>(position&lt;size());
<a name="l00277"></a>00277                                                                         <span class="keywordflow">if</span> (position!=size()-1)
<a name="l00278"></a>00278                                                                             {
<a name="l00279"></a>00279                                                                             (*this)[position].~ElemType();
<a name="l00280"></a>00280                                                                             ElemType&amp; elem = back();
<a name="l00281"></a>00281                                                                             (*this)[position] = elem;
<a name="l00282"></a>00282                                                                             }
<a name="l00283"></a>00283                                                                         popBack();
<a name="l00284"></a>00284                                                                         }
<a name="l00285"></a>00285 
<a name="l00293"></a><a class="code" href="classNxArray.html#6fd77b3041d7c57b1de98056ad14eebe">00293</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">bool</span> deleteEntry(<span class="keyword">const</span> ElemType&amp; x)
<a name="l00294"></a>00294                                                                         {
<a name="l00295"></a>00295                                                                         NxU32 s = size();
<a name="l00296"></a>00296                                                                         <span class="keywordflow">for</span>(NxU32 i=0;i&lt;s;i++)
<a name="l00297"></a>00297                                                                             {
<a name="l00298"></a>00298                                                                             <span class="keywordflow">if</span>((*<span class="keyword">this</span>)[i] == x)
<a name="l00299"></a>00299                                                                                 {
<a name="l00300"></a>00300                                                                                 replaceWithLast(i);
<a name="l00301"></a>00301                                                                                 <span class="keywordflow">return</span> <span class="keyword">true</span>;    <span class="comment">// Element found in the array</span>
<a name="l00302"></a>00302                                                                                 }
<a name="l00303"></a>00303                                                                             }
<a name="l00304"></a>00304                                                                         <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// Element not found in the array</span>
<a name="l00305"></a>00305                                                                         }
<a name="l00306"></a>00306 
<a name="l00310"></a><a class="code" href="classNxArray.html#1bc9d397ce73ca37a1d0fec1487f8bbd">00310</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keyword">const</span> ElemType &amp; operator[](<span class="keywordtype">unsigned</span> n)<span class="keyword"> const</span>
<a name="l00311"></a>00311 <span class="keyword">                                                                        </span>{
<a name="l00312"></a>00312                                                                         <span class="keywordflow">return</span> *(first + n);
<a name="l00313"></a>00313                                                                         }
<a name="l00314"></a>00314 
<a name="l00318"></a><a class="code" href="classNxArray.html#c29c11301e41452c6d4b93ebbc36a6f7">00318</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> ElemType &amp; operator[](<span class="keywordtype">unsigned</span> n)
<a name="l00319"></a>00319                                                                         {
<a name="l00320"></a>00320                                                                         <span class="keywordflow">return</span> *(first + n);
<a name="l00321"></a>00321                                                                         }
<a name="l00322"></a>00322 
<a name="l00324"></a>00324 
<a name="l00328"></a><a class="code" href="classNxArray.html#93ef3de99390fd70b533559e57647ee8">00328</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> Iterator begin()
<a name="l00329"></a>00329                                                                         {
<a name="l00330"></a>00330                                                                         <span class="keywordflow">return</span> first;
<a name="l00331"></a>00331                                                                         }
<a name="l00332"></a><a class="code" href="classNxArray.html#3778529e47d1783f2527f8b53bd03b93">00332</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a> begin()<span class="keyword"> const</span>
<a name="l00333"></a>00333 <span class="keyword">                                                                        </span>{
<a name="l00334"></a>00334                                                                         <span class="keywordflow">return</span> first;
<a name="l00335"></a>00335                                                                         }
<a name="l00336"></a>00336 
<a name="l00340"></a><a class="code" href="classNxArray.html#a37f96859b5fe67d63ea87666021a88c">00340</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> Iterator end()
<a name="l00341"></a>00341                                                                         {
<a name="l00342"></a>00342                                                                         <span class="keywordflow">return</span> last;
<a name="l00343"></a>00343                                                                         }
<a name="l00344"></a><a class="code" href="classNxArray.html#50f3fc72e75778ff89ac98401fb50c18">00344</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a> end()<span class="keyword"> const</span>
<a name="l00345"></a>00345 <span class="keyword">                                                                        </span>{
<a name="l00346"></a>00346                                                                         <span class="keywordflow">return</span> last;
<a name="l00347"></a>00347                                                                         }
<a name="l00348"></a>00348 
<a name="l00352"></a><a class="code" href="classNxArray.html#516329ba3b1139cd8a06e99fa0af55e6">00352</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> ElemType &amp; front()
<a name="l00353"></a>00353                                                                         {
<a name="l00354"></a>00354                                                                         <a class="code" href="group__foundation.html#g59363d1557cc274ba10bc9dbcac17ca1">NX_ASSERT</a>(last!=first);
<a name="l00355"></a>00355                                                                         <span class="keywordflow">return</span> *first;
<a name="l00356"></a>00356                                                                         }
<a name="l00357"></a><a class="code" href="classNxArray.html#2cb47d18557b59855ba7e15f58d10c15">00357</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keyword">const</span> ElemType &amp; front()<span class="keyword"> const</span>
<a name="l00358"></a>00358 <span class="keyword">                                                                        </span>{
<a name="l00359"></a>00359                                                                         <a class="code" href="group__foundation.html#g59363d1557cc274ba10bc9dbcac17ca1">NX_ASSERT</a>(last!=first);
<a name="l00360"></a>00360                                                                         <span class="keywordflow">return</span> *first;
<a name="l00361"></a>00361                                                                         }
<a name="l00362"></a>00362 
<a name="l00366"></a><a class="code" href="classNxArray.html#bbe6d5fbb05eb506cf20a5b2cb2354a8">00366</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> ElemType &amp; back()
<a name="l00367"></a>00367                                                                         {
<a name="l00368"></a>00368                                                                         <a class="code" href="group__foundation.html#g59363d1557cc274ba10bc9dbcac17ca1">NX_ASSERT</a>(last!=first);
<a name="l00369"></a>00369                                                                         <span class="keywordflow">return</span> *(last-1);
<a name="l00370"></a>00370                                                                         }
<a name="l00371"></a><a class="code" href="classNxArray.html#379d6dd8c656166916c05d06ef26d92f">00371</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keyword">const</span> ElemType &amp; back()<span class="keyword"> const</span>
<a name="l00372"></a>00372 <span class="keyword">                                                                        </span>{
<a name="l00373"></a>00373                                                                         <a class="code" href="group__foundation.html#g59363d1557cc274ba10bc9dbcac17ca1">NX_ASSERT</a>(last!=first);
<a name="l00374"></a>00374                                                                         <span class="keywordflow">return</span> *(last-1);
<a name="l00375"></a>00375                                                                         }
<a name="l00376"></a>00376 
<a name="l00384"></a><a class="code" href="classNxArray.html#3bc8a09c438032d5ef699bc3c371b933">00384</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> insert(Iterator where, <span class="keywordtype">unsigned</span> n, <span class="keyword">const</span> ElemType &amp; x)
<a name="l00385"></a>00385                                                                         {   
<a name="l00386"></a>00386                                                                         <span class="comment">// ElemType tmp = x;</span>
<a name="l00387"></a>00387 
<a name="l00388"></a>00388                                                                         <span class="keywordflow">if</span> (n == 0) <span class="keywordflow">return</span>;
<a name="l00389"></a>00389                                                                         <span class="keywordflow">if</span> (capacity() &lt; size() + n) 
<a name="l00390"></a>00390                                                                             {
<a name="l00391"></a>00391                                                                             size_t pos = where - first;
<a name="l00392"></a>00392                                                                             reserve((n + size()) * 2);
<a name="l00393"></a>00393                                                                             where = first + pos;
<a name="l00394"></a>00394                                                                             }
<a name="l00395"></a>00395                                                                         iterator stop = where + n; 
<a name="l00396"></a>00396                                                                         copy(where,last,stop);
<a name="l00397"></a>00397                                                                         fill(where,n,x);
<a name="l00398"></a>00398                                                                         last = last + n;
<a name="l00399"></a>00399                                                                         }
<a name="l00400"></a>00400 
<a name="l00407"></a><a class="code" href="classNxArray.html#eef49f0b631104e4f0839b4c1bf73716">00407</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> erase(Iterator from, Iterator to)
<a name="l00408"></a>00408                                                                         {   
<a name="l00409"></a>00409                                                                         <span class="keywordflow">if</span> (to &lt; last)
<a name="l00410"></a>00410                                                                             {
<a name="l00411"></a>00411                                                                             copy(to, last, from);
<a name="l00412"></a>00412                                                                             }
<a name="l00413"></a>00413                                                                         last = last - (to - from);
<a name="l00414"></a>00414                                                                         }
<a name="l00415"></a>00415 
<a name="l00421"></a><a class="code" href="classNxArray.html#96c21cb6c32a7dceb62967b5672ec6d8">00421</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> erase(Iterator from)
<a name="l00422"></a>00422                                                                         {   
<a name="l00423"></a>00423                                                                         last = from;
<a name="l00424"></a>00424                                                                         }
<a name="l00425"></a>00425 
<a name="l00426"></a>00426     <span class="keyword">private</span>:
<a name="l00427"></a><a class="code" href="classNxArray.html#3bf8fd9eaef509326919b66381a0c2bd">00427</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> fill(Iterator f, <span class="keywordtype">unsigned</span> n, <span class="keyword">const</span> ElemType &amp; x)
<a name="l00428"></a>00428                                                                         {
<a name="l00429"></a>00429                                                                         <span class="keywordflow">for</span> (; 0 &lt; n; --n, ++f)
<a name="l00430"></a>00430                                                                             *f = x;
<a name="l00431"></a>00431                                                                         }
<a name="l00432"></a>00432 
<a name="l00433"></a><a class="code" href="classNxArray.html#cc051014614a886c1463c663615c1966">00433</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> Iterator copy(<a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a> f, <a class="code" href="classNxFluidEmitterDesc.html">ConstIterator</a> l,   Iterator p)
<a name="l00434"></a>00434                                                                         {
<a name="l00435"></a>00435                                                                         <span class="keywordflow">for</span> (; f != l; ++p, ++f)
<a name="l00436"></a>00436                                                                             *p = *f;
<a name="l00437"></a>00437                                                                         <span class="keywordflow">return</span> p; 
<a name="l00438"></a>00438                                                                         }
<a name="l00439"></a>00439 
<a name="l00440"></a><a class="code" href="classNxArray.html#8ac7620fc25dd065c3cd2113d28d43a9">00440</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> ElemType * allocate(size_t n)
<a name="l00441"></a>00441                                                                         {
<a name="l00442"></a>00442 <span class="preprocessor">#ifdef _DEBUG</span>
<a name="l00443"></a>00443 <span class="preprocessor"></span>                                                                        <span class="keywordflow">return</span> (ElemType *)allocator.mallocDEBUG(n * <span class="keyword">sizeof</span>(ElemType), (<span class="keyword">const</span> <span class="keywordtype">char</span> *)__FILE__, __LINE__, <span class="stringliteral">"ElemType"</span>, <a class="code" href="group__foundation.html#gg14255f3ae2e8639c58458e237a96a7c5ed88db0745dd1e2fe48c960e307375b9">NX_MEMORY_Generic_Array_Container</a>);
<a name="l00444"></a>00444 <span class="preprocessor">#else</span>
<a name="l00445"></a>00445 <span class="preprocessor"></span>                                                                        <span class="keywordflow">return</span> (ElemType *)allocator.malloc(n * <span class="keyword">sizeof</span>(ElemType), <a class="code" href="group__foundation.html#gg14255f3ae2e8639c58458e237a96a7c5ed88db0745dd1e2fe48c960e307375b9">NX_MEMORY_Generic_Array_Container</a>);
<a name="l00446"></a>00446 <span class="preprocessor">#endif</span>
<a name="l00447"></a>00447 <span class="preprocessor"></span>                                                                        }
<a name="l00448"></a>00448 
<a name="l00449"></a><a class="code" href="classNxArray.html#c64c1b091740b08eb91eae9852a77c21">00449</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> ElemType * reallocate(size_t n, ElemType *old)
<a name="l00450"></a>00450                                                                         {
<a name="l00451"></a>00451                                                                         <span class="keywordflow">return</span> (ElemType *)allocator.realloc(old, n * <span class="keyword">sizeof</span>(ElemType));
<a name="l00452"></a>00452                                                                         }
<a name="l00453"></a>00453 
<a name="l00454"></a><a class="code" href="classNxArray.html#7dac57be22bf91cb9f3f6ea18c986a48">00454</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> deallocate(ElemType *p)
<a name="l00455"></a>00455                                                                         {
<a name="l00456"></a>00456                                                                         <span class="keywordflow">if</span>(p)   allocator.free(p);
<a name="l00457"></a>00457                                                                         }
<a name="l00458"></a>00458 
<a name="l00459"></a><a class="code" href="classNxArray.html#779f5855ea3d4a7b0368c029a3ef0e4d">00459</a>     <a class="code" href="group__foundation.html#g0a13a49371a760adfdde1b4d7c965abb">NX_INLINE</a> <span class="keywordtype">void</span> destroy(Iterator f, Iterator l)
<a name="l00460"></a>00460                                                                         {
<a name="l00461"></a>00461                                                                         <span class="keywordflow">for</span> (; f != l; ++f)
<a name="l00462"></a>00462                                                                             {
<a name="l00463"></a>00463                                                                             f-&gt;~ElemType();
<a name="l00464"></a>00464                                                                             }
<a name="l00465"></a>00465                                                                         }
<a name="l00466"></a>00466 
<a name="l00467"></a><a class="code" href="classNxArray.html#55fee09a37ae87806add57e2118c190e">00467</a>     Iterator first, last, memEnd;
<a name="l00468"></a>00468 
<a name="l00469"></a><a class="code" href="classNxArray.html#4364cae2df1fef0e3d9e2868f23ad81e">00469</a>     AllocType allocator;
<a name="l00470"></a>00470     };
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 
<a name="l00475"></a>00475 <span class="preprocessor">#endif</span>
<a name="l00476"></a>00476 <span class="preprocessor"></span><span class="comment">//AGCOPYRIGHTBEGIN</span>
<a name="l00478"></a>00478 <span class="comment"></span><span class="comment">// Copyright (c) 2005 AGEIA Technologies.</span>
<a name="l00479"></a>00479 <span class="comment">// All rights reserved. www.ageia.com</span>
<a name="l00481"></a>00481 <span class="comment"></span><span class="comment">//AGCOPYRIGHTEND</span>
</pre></div>
<hr style="width: 100%; height: 2px;"><a><br>
</a>
Copyright &copy; 2008 NVIDIA Corporation, 2701 San Tomas Expressway, Santa Clara, CA 95050 U.S.A. All rights reserved. <a href="http://www.nvidia.com ">www.nvidia.com</a>
</body>
</html>
