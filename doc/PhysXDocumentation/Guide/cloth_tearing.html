<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Cloth Tearing</title>
  <meta http-equiv="content-type"
 content="text/html; charset=iso-8859-1">
  <meta name="generator"
 content="amaya 9.2.1, see http://www.w3.org/Amaya/">
<link rel="stylesheet" href="/stylesheet.css" type="text/css">
</head>
<body>
<img alt="" src="images/PhysXlogo.png"
  align="middle"> <br>
<hr style="width: 100%; height: 2px;">
<span style="color: rgb(255, 0, 0);"></span>
<h1 style="text-align: center;">Cloth Tearing<br>
  <br>
  <img src="images/cloth_tear.png" width="401" height="469"><br>
</h1>
<p>Cloth can be made to have a limited resistance to stretching and thus to get torn in
  pieces under a large enough force.
  In order to enable tearing, set the NX_CLF_TEARABLE flag in the descriptor when
creating the cloth:</p>
<pre>     desc.flags |= NX_CLF_TEARABLE;</pre>
The tolerance of the cloth is set in terms of the elongation factor, using the descriptor member tearFactor; for example:<br>
<pre>     desc.tearFactor = 2.0f;</pre>
will cause the cloth to tear when the distance between two particles in the cloth is stretched past twice the
nominal distance. Alternatively, you can set the tear factor using NxCloth::setTearFactor(). The default value for the tear factor is 1.5.
<br>
This means that the actual force required to tear the cloth is dependent upon both the tear factor 
and the stretching stiffness: higher stiffness means a greater force is required in order to exceed
the elongation required for tearing.
<p>Tearing works by splitting vertices, not by cutting the edges between vertices. Thus the total number of vertices increases when
tearing occurs. This means that the buffers you provide when creating the cloth must be correspondingly larger in order
to accommodate new vertices; when the buffers are filled, no more tearing can occur. The margin necessary will depend on the
application and how torn up you expect the cloth to get. A typical equilateral triangle mesh may increase by up to a factor of 6
if torn up completely, or 2 if shredded into thin strips, while a single tear across a piece of cloth will only generate as many 
new vertices as lie along the tear.</p>
<h2>&nbsp;</h2>
<h2>Explicit tearing</h2>
<p>In some situations you may wish the cloth to tear not from internal stresses, but
  for some other game-related reason, such as gunshots, slashes with a sword or simply
  a scripted event. To do this, call NxCloth::tearVertex() for the vertices you wish
  to tear the cloth at. You must also specify a plane through the vertex that you wish
  to use as "cutting plane", allowing you to choose along which triangle edges the 
  cloth is to tear. </p>
<pre>     bool NxCloth::tearVertex(const NxU32 vertexId, const NxVec3 &amp;normal);</pre>
<h2>&nbsp;</h2>
<h2>Preset vertex tearing (tear lines) <br>
</h2>
<p>The SDK provides a method to more precisely control the tearing of a cloth. It is possible to specify if vertices are tearable</p>
<p> An example of this is provided in the image above, the vertices forming the triangular top sections of cloth have had tearing disabled. This functionality could be used for a variety of effects such as a players cloak which can be torn and made to appear ragged, but not completely destroyed. Another use would be to restrict how far a cloth can be torn to prevent accumulating too many pieces, which could spread far apart and cause performance problems(due to the cloth having a very large bounding box). </p>
<p>To specify that a vertex can be torn(split) use the NX_CLOTH_VERTEX_TEARABLE flag. The flags array should be of type NxU32 and should have the same number of flags as the mesh has vertices. </p>
<p>In all other ways preset vertex tearing is identical to normal tearing. For example you should make sure there is enough additional space for the vertices created during tearing and the tear factor + NX_CLF_TEARABLE should be set. </p>
<h3>Example</h3>
<pre>     NxClothMeshDesc meshDesc;</pre>
<pre>     static const NxU32 vFlags[] = {0, 0, NX_CLOTH_VERTEX_TEARABLE, ...}; //two normal vertices followed by a tearable vertex. </pre>
<pre>     meshDesc.vertexFlagStrideBytes =  sizeof(NxU32);
     meshDesc.vertexFlags = vFlags;
     ...</pre>
<p>&nbsp;</p>
<h2>Tips</h2>
<ul>
  <li>Make sure meshData.maxVertices and the corresponding buffers
	in meshData are large enough for the new vertices generated by tearing.
	When the buffer cannot hold the new vertices anymore, tearing stops.
  </li>
  <li>
    For tearing in hardware, make sure you cook the mesh with
    the flag NX_CLOTH_MESH_TEARABLE set in the NxClothMeshDesc.flags.
  </li>
  <li>
    You can use parent indices (see 
	<a href="cloth_rendering.html">Cloth Rendering</a>) to handle data
	associated with vertices duplicated through tearing, such as
	texture coordinates. The parent index of a vertex indicates the vertex in the
	original untorn cloth from which the vertex was torn and duplicated.
  </li>
</ul>
<h2>API Reference<br>
</h2>
<ul>
  <li><a href="./../../PhysicsSDK/classNxCloth.html">NxCloth</a></li>
  <li><a href="./../../PhysicsSDK/classNxClothMesh.html">NxClothMesh</a><br>
  </li>
  <li><a href="./../../PhysicsSDK/classNxScene.html">NxScene</a></li>
</ul>
<hr style="width: 100%; height: 2px;"><a><br>
</a>
Copyright &copy; 2008 NVIDIA Corporation, 2701 San Tomas Expressway, Santa Clara, CA 95050 U.S.A. All rights reserved. <a href="http://www.nvidia.com ">www.nvidia.com</a>
</body>
</html>
