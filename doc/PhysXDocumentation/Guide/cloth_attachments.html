<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Cloth Attachments</title>
  <meta http-equiv="content-type"
 content="text/html; charset=iso-8859-1">
  <meta name="generator"
 content="amaya 9.2.1, see http://www.w3.org/Amaya/">
  <link rel="stylesheet" href="/stylesheet.css" type="text/css">
</head>
<body>
<img alt="" src="images/PhysXlogo.png" align="middle"> <br>
<hr style="width: 100%; height: 2px;">
<br>
<br>
<h1 style="text-align: center;">Cloth Attachments<br>
</h1>
<h2 align="center"><img src="images/cloth_attach.PNG" width="639" height="536"></h2>
<h2>&nbsp;</h2>
<h2>Attaching Cloth to Fixed Points</h2>
<pre>     void attachVertexToGlobalPosition(const NxU32 vertexId, const NxVec3 &amp;pos);</pre>
Cloth particles can be attached to fixed points specified in the global
frame. The vertexId specifies the cloth particle to attach to the
global position, corresponding to the triangle vertex index of
the mesh which is
passed to the API when cooking the cloth. The
first vertex of the second triangle would be three.<br>
<br>
A useful method for obtaining a vertex ID, for example when dragging
with a mouse, is to cast a ray against the cloth. See <a
 href="cloth_misc.html">Other Cloth Features</a> for more information. <br>
<h2>Attaching Cloth to Shapes</h2>
<pre>     void attachVertexToShape(NxU32 vertexId, const NxShape *shape, const NxVec3 &amp;localPos, NxU32 attachmentFlags);</pre>
Cloth can be attached to rigid body shapes in much the same way as
attaching the cloth to a global position. But instead of specifying the
global position, the position is relative to the shape (i.e., a
position
in the shape's coordinate frame). As the shape moves, this position
will change in the global frame, pulling the cloth with it.<br>
<br>
The attachment shape can be either static or dynamic (i.e., attached to
a
dynamic actor).<br>
<br>
&nbsp;The attachmentFlags parameter specifies how the cloth interacts
with the shape. The two possible values are shown below:<br>
<br>
<ul>
  <li>&nbsp;&nbsp;&nbsp; NX_CLOTH_ATTACHMENT_TWOWAY - The object can
pull the cloth and
the cloth can move the object (only for dynamic shapes). <br>
    <br>
The default is one way interaction. ie the object can pull the cloth,
but the cloth cannot move the object. If the object moves then the
cloth will
follow it. However, if the cloth is pulled the object will behave as if
it is fixed and not move.<br>
    <br>
  </li>
  <li>&nbsp;&nbsp;&nbsp; NX_CLOTH_ATTACHMENT_TEARABLE - When this flag
is set the attachment can be torn. ie if enough force is exerted on the
attachment then it will snap.<br>
  </li>
</ul>
<h2>Attaching Cloth to Shapes from Collisions</h2>
<pre>     void attachToCollidingShapes(NxU32 attachmentFlags);</pre>
<pre>     void attachToShape(const NxShape *shape, NxU32 attachmentFlags);</pre>
Cloth can be attached to rigid bodies automatically by detecting
colliding cloth particles and gluing these particles to the shape. For
example, imagine a rigid body flag pole and a cloth
to serve as the flag. The flag is modeled so that one of its edges is
inside the geometry of the flag pole. The cloth can then be attached
to the pole by attaching all the intersecting points of the flag to the
pole.<br>
<br>
attachToCollidingShapes() attaches to any rigid body shape in the
scene.
attachToShape() is less indiscriminate and only attaches to a
specified shape. attachmentFlags behaves in a similar way to the
attachmentFlags parameter of
attachVertexToShape().<br>
<br>
It should be noted that this method of attachment will not work with
general triangle meshes because the inside/outside of a general
triangle mesh is not defined.<br>
<h2>Detaching Cloth</h2>
<pre>     void detachFromShape(const NxShape *shape);</pre>
<pre>     void freeVertex(const NxU32 vertexId);</pre>
<p>Cloth particles can be detached as well as attached.
detachFromShape() finds all the cloth particles that are attached to a
particular shape and detaches them. freeVertex() detaches a specific
vertex. The same vertex index that was used to attach a position or
shape can be used again with attachVertexToGlobalPosition() or
attachVertexToShape().</p>
<p>NOTE: Cloth and rigid bodies have separate solvers. This can cause
stability problems in some cases, especially when the density of an
attached object is set too low - the impulses generated by the
attachment constraint overshoot the object and cause the system to get
unstable. The workaround is to increase the density of the object or to
add linear and angular damping to it. </p>
<h2>Tearable Attachments </h2>
<p>When attaching a cloth to an actor the attachment can be flagged as tearable using NX_CLOTH_ATTACHMENT_TEARABLE, this allows the cloth to break the attachment if a sufficient force is applied to the attachment.</p>
<p>In fact the attachment is broken when the stretching constraint attached to the object exceeds a certain factor of its rest length. This factor is specified using:</p>
<pre>     NxClothDesc::attachmentTearFactor </pre>
<pre>     void NxCloth::setAttachmentTearFactor(NxReal factor) ;
     NxReal NxCloth::getAttachmentTearFactor();</pre>
<p>The default is 1.5 so breakable attachments break when the constraint is stretch 50% more than its rest length. </p>
<p>There are many uses for tearable attachments, for example towels which can be torn from there rails, leaves on plants which can be blown away by a strong gust of wind or a characters cape which can be torn off when it gets trapped in a door. </p>
<h2>API Reference</h2>
<ul>
  <li><a href="./../../PhysicsSDK/classNxCloth.html">NxCloth</a></li>
  <li><a href="./../../PhysicsSDK/classNxShape.html">NxShape</a><br>
  </li>
</ul>
<hr style="width: 100%; height: 2px;"><a><br>
</a>
Copyright &copy; 2008 NVIDIA Corporation, 2701 San Tomas Expressway, Santa Clara, CA 95050 U.S.A. All rights reserved. <a href="http://www.nvidia.com ">www.nvidia.com</a>
</body>
</html>
